From 9a242899158c776377696d445df74db270150385 Mon Sep 17 00:00:00 2001
From: Jeff Davis <jdavis@postgresql.org>
Date: Fri, 24 Mar 2023 08:47:42 -0700
Subject: [PATCH] pg_locale.c: change ereport() to elog().

Discussion: https://postgr.es/m/73553013-3926-0f34-0fb8-f37909fe4902@enterprisedb.com
Reported-by: Peter Eisentraut
---
 src/backend/utils/adt/pg_locale.c | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

diff --git a/src/backend/utils/adt/pg_locale.c b/src/backend/utils/adt/pg_locale.c
index 6d06c394f0f1..41b0e9fe6918 100644
--- a/src/backend/utils/adt/pg_locale.c
+++ b/src/backend/utils/adt/pg_locale.c
@@ -2507,16 +2507,15 @@ pg_ucol_open(const char *loc_str)
 
 	/*
 	 * Must never open default collator, because it depends on the environment
-	 * and may change at any time.
+	 * and may change at any time. Should not happen, but check here to catch
+	 * bugs that might be hard to catch otherwise.
 	 *
 	 * NB: the default collator is not the same as the collator for the root
 	 * locale. The root locale may be specified as the empty string, "und", or
 	 * "root". The default collator is opened by passing NULL to ucol_open().
 	 */
 	if (loc_str == NULL)
-		ereport(ERROR,
-				(errcode(ERRCODE_FEATURE_NOT_SUPPORTED),
-				 errmsg("opening default collator is not supported")));
+		elog(ERROR, "opening default collator is not supported");
 
 	/*
 	 * In ICU versions 54 and earlier, "und" is not a recognized spelling of
