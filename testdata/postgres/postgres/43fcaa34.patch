From 43fcaa345d5af45101c5d96dd164f1ebed686b2c Mon Sep 17 00:00:00 2001
From: Andres Freund <andres@anarazel.de>
Date: Sat, 17 Sep 2022 09:21:59 -0700
Subject: [PATCH] Include c.h instead of postgres.h in
 src/port/*p{read,write}*.c

Frontend code shouldn't include postgres.h. Some files in src/port/ need to
include postgres.h/postgres_fe.h, but these files don't.

Discussion: https://postgr.es/m/20220915022626.5xx3ccgkzpkqw5mq@awork3.anarazel.de
Backpatch: 12-, where 3fd2a7932ef introduced (some) of these files
---
 src/port/preadv.c      | 2 +-
 src/port/pwritev.c     | 2 +-
 src/port/win32pread.c  | 2 +-
 src/port/win32pwrite.c | 2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/src/port/preadv.c b/src/port/preadv.c
index 48b64d4593d7..188e10f0652d 100644
--- a/src/port/preadv.c
+++ b/src/port/preadv.c
@@ -12,7 +12,7 @@
  */
 
 
-#include "postgres.h"
+#include "c.h"
 
 #include <unistd.h>
 
diff --git a/src/port/pwritev.c b/src/port/pwritev.c
index 8b303fcbcdc0..de9b7e4e3d30 100644
--- a/src/port/pwritev.c
+++ b/src/port/pwritev.c
@@ -12,7 +12,7 @@
  */
 
 
-#include "postgres.h"
+#include "c.h"
 
 #include <unistd.h>
 
diff --git a/src/port/win32pread.c b/src/port/win32pread.c
index 7058c3460b51..ebcdd3375699 100644
--- a/src/port/win32pread.c
+++ b/src/port/win32pread.c
@@ -12,7 +12,7 @@
  */
 
 
-#include "postgres.h"
+#include "c.h"
 
 #include <windows.h>
 
diff --git a/src/port/win32pwrite.c b/src/port/win32pwrite.c
index 455cec4a747f..7f2e62e8a781 100644
--- a/src/port/win32pwrite.c
+++ b/src/port/win32pwrite.c
@@ -12,7 +12,7 @@
  */
 
 
-#include "postgres.h"
+#include "c.h"
 
 #include <windows.h>
 
